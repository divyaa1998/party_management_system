<app-header></app-header>
<section class="section container-fluid">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <button
            class="btn btn-primary mt-3 float-right"
            routerLink="/add-party"
          >
            Add Party
          </button>

          <div>
            <mat-form-field class="mt-3">
              <mat-label>Filter</mat-label>
              <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="Ex. party"
                #input
              />
            </mat-form-field>
          </div>

          <div class="mat-elevation-z8">
            <table mat-table [dataSource]="dataSource" matSort>
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>S.No</th>
                <td mat-cell *matCellDef="let row; let i = index">
                  {{ paginatorRef.pageIndex * paginatorRef.pageSize + (i + 1) }}
                </td>
              </ng-container>

              <ng-container matColumnDef="companyname">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Company Name
                </th>
                <td mat-cell *matCellDef="let row">{{ row.company_name }}</td>
              </ng-container>

              <ng-container matColumnDef="apply_tds">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Apply TDS
                </th>
                <td mat-cell *matCellDef="let row">{{ row.apply_tds }}</td>
              </ng-container>
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
                <td mat-cell *matCellDef="let row">{{ row.name }}</td>
              </ng-container>
              <ng-container matColumnDef="login_access">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Login Access
                </th>
                <td mat-cell *matCellDef="let row">{{ row.login_access }}</td>
              </ng-container>
              <ng-container matColumnDef="mobileno">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Mobile No
                </th>
                <td mat-cell *matCellDef="let row">{{ row.mobile_no }}</td>
              </ng-container>
              <ng-container matColumnDef="credit_limit">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Credit Limit
                </th>
                <td mat-cell *matCellDef="let row">{{ row.credit_limit }}</td>
              </ng-container>
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Status
                </th>
                <td mat-cell *matCellDef="let row">
                  {{ row.is_active == 1 ? "Active" : "Inactive" }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                  Action
                </th>
                <td mat-cell *matCellDef="let row">
                  <div class="pt-2 d-flex">
                    <a
                      class="btn btn-secondary btn-sm m-1"
                      (click)="goToForm('view', row)"
                      ><i class="bi bi-eye"></i
                    ></a>
                    <a
                      class="btn btn-primary btn-sm m-1"
                      (click)="goToForm('edit', row)"
                      ><i class="bi bi-pencil-square"></i
                    ></a>
                    <a
                      class="btn btn-danger btn-sm m-1"
                      (click)="deleteParty(row)"
                      ><i class="bi bi-trash"></i
                    ></a>
                  </div>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">
                  No data matching the filter "{{ input.value }}"
                </td>
              </tr>
            </table>

            <mat-paginator
              #paginatorRef
              [pageSizeOptions]="[5, 10, 25, 100]"
              [pageSize]="5"
            ></mat-paginator>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
